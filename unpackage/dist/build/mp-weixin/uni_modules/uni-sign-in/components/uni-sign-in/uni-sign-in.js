(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in"],{"26ea":function(e,n,t){"use strict";(function(e,o){var a=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(t("2eee")),r=a(t("c973")),s=a(t("18e7")),u=e.database(),c=u.action("signIn").collection("opendb-sign-in"),l=(new Date((new Date).toLocaleDateString()).getTime(),{name:"uni-signIn",data:function(){return{total:0,scores:0,weekdays:[1,2,3,4,5,6,7],signInRes:{days:[],n:0}}},mounted:function(){},methods:{getSignedInInfo:function(){var e=arguments,n=this;return(0,r.default)(i.default.mark((function t(){var a,r,s;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"今日已签过",r=new Date((new Date).toLocaleDateString()).getTime(),t.next=4,c.where("'user_id' == $env.uid && 'date' == ".concat(r," && 'isDelete' == false")).get();case 4:return s=t.sent,s.result.data.length&&(n.signInRes=s.result,n.$refs.popup.open(),o.showToast({title:a,duration:3e3,icon:"none"})),t.abrupt("return",s.result.data);case 7:case"end":return t.stop()}}),t)})))()},showRewardedVideoAd:function(){var n=this;return(0,r.default)(i.default.mark((function t(){var a,u;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.getSignedInInfo();case 2:if(a=t.sent,console.log(a),!a||0!=a.length){t.next=9;break}if(u=e.getCurrentUserInfo().uid,u){t.next=8;break}return t.abrupt("return",o.navigateTo({url:"/pages/ucenter/login-page/index/index"}));case 8:s.default.show({adpid:1733738477,adType:"RewardedVideo",urlCallback:{userId:u,extra:"uniSignIn"}},(function(e){if(e&&e.isEnded){console.log("onClose "+e.isEnded);var t=0;o.showLoading({mask:!0});var a=setInterval(function(){var s=(0,r.default)(i.default.mark((function r(s){return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t++,i.next=3,n.getSignedInInfo("签到成功");case 3:e=i.sent,(t>2||e.length)&&(e.length||o.showToast({title:"签到失败！",icon:"error",duration:6e3}),clearInterval(a),o.hideLoading());case 5:case"end":return i.stop()}}),r)})));return function(e){return s.apply(this,arguments)}}(),2e3)}else console.log("onClose "+e.isEnded),o.showToast({title:"播放中途退出,签到失败！",icon:"error",duration:5e3})}),(function(e){console.log(e),o.showToast({title:e.errMsg,icon:"none"})}));case 9:case"end":return t.stop()}}),t)})))()},open:function(){var e=this;return(0,r.default)(i.default.mark((function n(){var t,a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o.showLoading({mask:!0}),n.prev=1,n.next=4,e.getSignedInInfo();case 4:if(t=n.sent,!t||0!=t.length){n.next=14;break}return n.next=8,c.add({});case 8:a=n.sent,console.log(a),o.hideLoading(),e.signInRes=a.result,e.$refs.popup.open(),7==e.signInRes.days.length?o.showToast({title:"你已完成7日连续签到，获得60积分！",icon:"none",duration:5e3}):o.showToast({title:"签到成功,获得10积分！",icon:"none",duration:5e3});case 14:n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](1),o.hideLoading(),console.error(n.t0);case 20:case"end":return n.stop()}}),n,null,[[1,16]])})))()},closeMe:function(e){this.$refs.popup.close()}}});n.default=l}).call(this,t("a9ff")["default"],t("543d")["default"])},"2ab4":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}));var o={uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"6165"))},uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(t.bind(null,"bd54"))}},a=function(){var e=this,n=e.$createElement,t=(e._self._c,e.signInRes.days.length),o=e.__map(e.weekdays,(function(n,t){var o=e.__get_orig(n),a=e.signInRes.days.includes(n-1),i=e.signInRes.days.includes(n-1)||n>e.signInRes.n;return{$orig:o,g1:a,g2:i}}));e.$mp.data=Object.assign({},{$root:{g0:t,l0:o}})},i=[]},"48f9":function(e,n,t){"use strict";t.r(n);var o=t("26ea"),a=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=a.a},"52ce":function(e,n,t){},c607:function(e,n,t){"use strict";var o=t("52ce"),a=t.n(o);a.a},ec38:function(e,n,t){"use strict";t.r(n);var o=t("2ab4"),a=t("48f9");for(var i in a)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(i);t("c607");var r=t("f0c5"),s=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=s.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component',
    {
        'uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("ec38"))
        })
    },
    [['uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component']]
]);
