(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/updateEvent/updateEvent"],{"2fcc":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return n}));var n={uniFilePicker:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(a.bind(null,"8e6d"))}},i=function(){var e=this.$createElement;this._self._c},u=[]},"3afe":function(e,t,a){"use strict";a.r(t);var n=a("2fcc"),i=a("73bd");for(var u in i)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(u);a("e1c6");var c=a("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=r.exports},"61cb":function(e,t,a){"use strict";(function(e,n){var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=i(a("2eee")),c=i(a("c973")),r=a("e3ad"),l={data:function(){var e=(0,r.getDate)({format:!0});return{imageValue:[],images:[],date:e,value:{},id:0,ipt:"",textarea:""}},onLoad:function(e){this.id=e.id},onReady:function(){this.getContent()},onPullDownRefresh:function(){setTimeout((function(){e.stopPullDownRefresh()}),1e3)},methods:{success:function(e){this.images=e.tempFilePaths},fail:function(){e.showModal({content:"上传图片失败，请检查网络"})},formSubmit:function(t){var a=this;return(0,c.default)(u.default.mark((function i(){var c,r;return u.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.value=t.detail.value,a.showProgress=!0,console.log(a.imageValue,"imageValue"),""!=a.value.input&&""!=a.value.textarea){i.next=8;break}console.log(a.value),e.showModal({title:"提示",content:"请完整填写内容"}),i.next=20;break;case 8:return c=n.database(),i.prev=9,i.next=12,a.$refs.files.upload();case 12:r=i.sent,console.log(a.imageValue),0==r.length?c.collection("HeardEvent").where({_id:a.id}).update({input:a.value.input,textarea:a.value.textarea,image:[a.imageValue[0].path],date:a.date}).then((function(){e.navigateBack({delta:1})})):c.collection("HeardEvent").where({_id:a.id}).update({input:a.value.input,textarea:a.value.textarea,image:a.images,date:a.date}).then((function(){e.navigateBack({delta:1})})),i.next=20;break;case 17:i.prev=17,i.t0=i["catch"](9),c.collection("HeardEvent").where({_id:a.id}).update({input:a.value.input,textarea:a.value.textarea,image:[],date:a.date}).then((function(){e.navigateBack({delta:1})}));case 20:case"end":return i.stop()}}),i,null,[[9,17]])})))()},bindDateChange:function(e){this.date=e.detail.value},getContent:function(){var e=this,t=n.database();t.collection("HeardEvent").where({_id:this.id}).get().then((function(t){if(e.ipt=t.result.data[0].input,e.textarea=t.result.data[0].textarea,t.result.data[0].image){var a=t.result.data[0].image.map((function(e){return{url:e}}));e.imageValue=a,e.images=["".concat(e.imageValue[0].url)],console.log(e.images),e.date=t.result.data[0].date}}))}}};t.default=l}).call(this,a("543d")["default"],a("a9ff")["default"])},"73bd":function(e,t,a){"use strict";a.r(t);var n=a("61cb"),i=a.n(n);for(var u in n)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(u);t["default"]=i.a},"8cc6":function(e,t,a){"use strict";(function(e,t){var n=a("4ea4");a("f93a"),a("a9ff");n(a("66fd"));var i=n(a("3afe"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(i.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},"92ca":function(e,t,a){},e1c6:function(e,t,a){"use strict";var n=a("92ca"),i=a.n(n);i.a}},[["8cc6","common/runtime","common/vendor"]]]);